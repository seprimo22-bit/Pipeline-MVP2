<!DOCTYPE html>
<html>
<head>
<title>Campbell Pipeline</title>

<style>
body{
  font-family: Arial, sans-serif;
  max-width:700px;
  margin:auto;
  padding:20px;
}

textarea{
  width:100%;
  height:120px;
  font-size:16px;
}

button{
  padding:10px 20px;
  font-size:16px;
  margin-top:10px;
  cursor:pointer;
}

#facts{
  margin-top:20px;
  padding:15px;
  background:#f4f4f4;
  border-radius:8px;
}

.hidden{
  display:none;
}
</style>
</head>
<body>

<h2>Ask a Question</h2>

<textarea id="q" placeholder="Type your question..."></textarea>
<br>
<button onclick="ask()">Get Facts</button>

<div id="facts"></div>

<script>
async function ask(){
  let q=document.getElementById("q").value;

  let res=await fetch("/analyze",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({question:q})
  });

  let data=await res.json();

  // Only show final facts
  let facts = data.final_output?.facts || [];

  if(!facts.length){
    document.getElementById("facts").innerHTML =
      "<b>No clear facts returned.</b>";
    return;
  }

  let html="<h3>Facts:</h3><ul>";
  facts.forEach(f=> html+=`<li>${f}</li>`);
  html+="</ul>";

  document.getElementById("facts").innerHTML = html;
}
</script>

</body>
</html>
